@model HealthCare.Models.Empresas

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="~/Content/bootstrap-theme.css" />
    <link rel="stylesheet" href="~/Content/bootstrap.css" />
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <title>Bienvenido</title>
</head>
<body>
    <center>
        <div id="Principal">
            <h1><u>Principal</u></h1>
            <input type="button" value="Domestico" id="btn_Domestico" />
            <input type="button" value="Mascotas" id="btn_Mascotas" />
            <input type="button" value="Salud" id="btn_Salud" />
            <input type="button" value="Bienestar" id="btn_Bienestar" />
        </div>
        <div hidden="hidden" id="Domestico">
            <h1><u>Domestico</u></h1>
            <input type="button" value="Labores Domesticas" id="btn_Domestico_Labores Domesticas" />
            <input type="button" value="Cocina" id="btn_Domestico_Cocina" />
        </div>
        <div hidden="hidden" id="Mascotas">
            <h1><u>Mascotas</u></h1>
            <input type="button" value="Consulta de Mascotas Comunes" id="btn_Mascotas_Comunes" />
            <input type="button" value="Consulta de Mascotas Exoticas" id="btn_Mascotas_Exoticas" />
            <input type="button" value="Cuidados Cosmeticos" id="btn_Mascotas_Cuidados Cosmeticos" />
            <input type="button" value="Cuidados Especiales" id="btn_Mascotas_Cuidados Especiales" />
        </div>
        <div hidden="hidden" id="Salud">
            <h1><u>Salud</u></h1>
            <input type="button" value="Medicina General" id="btn_Salud_Medicina General" />
            <input type="button" value="Farmacia" id="btn_Salud_Farmacia" />
            <input type="button" value="Tratamientos" id="btn_Salud_Tratamientos" />
            <input type="button" value="Rehabilitacion" id="btn_Salud_Rehabilitacion" />
            <input type="button" value="Especialistas" id="btn_Salud_Especialistas" />
        </div>
        <div hidden="hidden" id="Bienestar">
            <h1><u>Bienestar</u></h1>
            <input type="button" value="Cosmetica" id="btn_Bienestar_Cosmetica" />
            <input type="button" value="Ocio" id="btn_Bienestar_Ocio" />
        </div>
        <input type="button" value="Volver" id="btn_Volver" hidden="hidden" />        
    </center> 
    <br />

    <p id="sector">Ningun sector seleccionado</p>
    <form method="post" action="/Home/solicitudServicio">
        <input type="hidden" name="IDEmpresa" id="IDEmpresa" />
        <input type="hidden" name="IDCliente" value="@Model.IDEmpresa" />
        <input type="hidden" name="prescripcion" id="prescripcion" value="false" />
        <ul id="lista"></ul>

        <br />       

        <div id="prescripciones"></div>
        <script>
            var cual;
            $("#Principal > input").each(function (pos, el) {
                el.onclick = function () {
                    cual = el.id.split("_")[1];
                    $("#sector").text(cual);
                    $("#Principal").attr("hidden", "hidden");
                    $("#" + cual).attr("hidden", null);
                    $("#btn_Volver").attr("hidden", null);
                };
            })

            $("#btn_Volver").on("click", function () {
                $("#lista").empty();
                $("#Principal").attr("hidden", null);
                $("#btn_Volver").attr("hidden", "hidden");
                $("#" + cual).attr("hidden", "hidden");
                $("#sector").text("Ningun sector seleccionado");
            })

            var especifico;

            $("input").not("#Principal > input").not("#btn_Volver").not("#btn_Prescripciones").each(function (pos, el) {
                el.onclick = function () {
                    $("#lista").empty();
                    especifico = el.id.split("_")[2];
                    $("#sector").text(cual + " : " + especifico);
                    $.ajax({
                        url: "http://localhost:18500/Home/obtenerEmpresas?sector=" + cual + "&especializacion=" + especifico
                    }).done(function (data) {
                        var json = JSON.parse(data)
                        if (json.length > 0) {
                            json.forEach(function (el, pos, ar) {
                                $("#lista").append("<input type='submit' value='Nombre : " + el.Nombre + "   con valoracion : " + el.Valoracion + "' id=" + el.IDEmpresa + " />")
                            })

                            $("#lista > input").on("click", function(el) {
                                $("#IDEmpresa").val(el.target.id)
                            })
                        } else {
                            $("#lista").append("<li>No hay empresas aun registradas en este campo. Lo sentimos</li>");
                        }
                    });
                }
            })            
        </script>
    </form>
</body>
</html>
